<link href="../../Content/ChessBoard.css" rel="stylesheet" />

<div class="game-bar">
    <div class="select">
        <select ng-model="selectedGame" ng-options="g.display for g in currentGames"></select>
        <button ng-click="getGame()" class="btn btn-primary btn-sm">Change Game</button>
    </div>
    <button class="commit btn btn-success" ng-disabled="!canMakeMove()" ng-click="MakeMove()">Commit Move</button>
</div>

<div class="chessbox" ng-show="game.Id > 0">
    <div class="alert-bar">
        <div ng-show="Failure" class="alert-danger" style="margin:0; padding: 2px; padding-left: 4px;">
            <b>{{Failure}}</b>
        </div>
        <div class="completed-notification" ng-show="game.Complete">
            <label ng-show="game.Winner">Checkmate! {{game.Winner.DisplayName}} wins!</label>
            <label ng-show="!game.Winner">This game is a Draw</label>
        </div>
    </div>

    <table class="chessboard">
        <tr ng-repeat="row in game.Board.Squares" class="row">
            <td ng-repeat="square in row"
                ng-class="{ 'dark': isDark(square), 'ready': isReady(square), 'destination': isDestination(square) }"
                ng-click="setFocus(square)" class="square">

                <cs-piece piece="square.ChessPiece"></cs-piece>

            </td>
        </tr>
    </table>
    <div class="player-names">
        <label class="light">Light: {{selectedGame.LightPlayerName}}</label>
        <div><label class="turn-notifier" ng-show="game.IsCurrentPlayersMove && !game.Complete">Your move!</label></div>
        <label class="dark">Dark: {{selectedGame.DarkPlayerName}}</label>
    </div>
</div>



<div ng-hide="game.Id > 0">
    <h3>Please Select a Game</h3>
    <p>
        If you do not have any current games:
        You may <a href="/Challenge">challenge</a> another player,
        or accept any challenges currently extended to you.
    </p>
</div>

